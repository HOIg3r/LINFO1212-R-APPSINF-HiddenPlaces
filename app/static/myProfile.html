<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>HiddenPlaces - MyProfile</title>
    <link rel="stylesheet" href="css/navbar.css">
    <link rel="stylesheet" href="css/myProfile.css">
    <link rel="stylesheet" href="css/popup.css">
    <link rel="shortcut icon" href="img/logo.png" />

</head>
<body>
    <header>
        <div class="topnav" id="myTopnav">
            <a href="index.html" class="active">HiddenPlaces</a>
            <a href="index.html">Home</a>
            <a href="login.html">Log-in</a>
            <a href="places.html">Places</a>
            <a href="addPlaces.html">Add places</a>


            <div class="search-box">
                <form method="post" action="search">
                    <button class="btn-search"><i class="fas fa-search"></i></button>
                    <input type="text" class="input-search" placeholder="Search..." name="input">
                </form>
            </div>


            <div class="dropdown">
                <p class="username">{{username}}</p>
                <img src="img/user.png" alt="Profile picture" id="profile_picture" width="40px" height="40px"
                     class="profile-picture">

                <div class="dropdown-content" id="dropdownProfile">
                    <a href="myProfile.html">My Profile</a>
                    <a href="logout.html">Disconnect</a>
                </div>
            </div>
        </div>
    </header>

    <div class="container">
        <h1>My profil</h1>
        <div id="content">
            <p><span> Your username</span> : {{username}} </p>
            <p><span>Your fullname</span> : {{fullname}}</p>
            <p><span>Your Email</span> : {{email}}</p>
            <button name = "changeMyData" id="btnChangeMyData">Change my data</button>
            <button name = "deleteAccount" id="btnDeleteAccount">Delete my account</button>
        </div>
    </div>

    <div class="overlay_changeDataPopup" id="overlay_changeDataPopup">
        <div class="content_changeDataPopup">
            <h2>Modifier ses donn√©es<span class="btnCloseChangeDataPopup" id="btnCloseChangeDataPopup">&times;</span></h2>
            <form id="formulaire" action="changeData" method="post">
                <input name="newUsername" placeholder="new username" type="text" required>
                <br>
                <input name="newFullname" placeholder="new fullname" type="text" required>
                <br>
                <input name="newEmail" placeholder="example@hotmail.com" type="email" required>
                <br>
                <input name="newPassword" placeholder="new password" type="password" required>
                <br>
                <input name="confirmNewPassword" placeholder="confirm password" type="password" required>
                <br>
                <button class="btnChangeDataPopup" type="submit">Confirm</button>
            </form>
        </div>

    </div>

    <div class="overlay_deleteAccountPopup" id="overlay_deleteAccountPopup">
        <div class="content_deleteAccountPopup" id="content_deleteAccountPopup">
            <h2>Supprimer mon compte<span class="btnCloseDeleteAccountPopup" id="btnCloseDeleteAccountPopup">&times;</span></h2>
            <h4>You are about to delete your account, the places you have added to the site will be kept and still readable.<br>
                All your counter data will be permanently deleted.<br>
                To confirm that you want to delete your account, please insert your e-mail.</h4>
            <form class="delete_btn" action="delete" method="post">
                <input name="delete_confirm_email" class="delete_confirm_email" id="delete_confirm_email" placeholder="YourEmail@hotmail.com">
                <button class="delete_account_btn" id="delete_account_btn" type="submit">Delete my account</button>
            </form>
        </div>
    </div>

    <div style="display:{{style}}" id="overlay" class="overlay">
        <div id="popup-errorMessage" class="popup-errorMessage">
            <h2>Error Message : <span class="btnClose" id="btnClose">&times;</span></h2>
            <h3>{{errorMessage}}</h3>

        </div>
    </div>
</body>

<script>
    //Change Data
    var btnChangeMyData = document.getElementById('btnChangeMyData')
    var btnCloseChangeDataPopup = document.getElementById('btnCloseChangeDataPopup')
    var overlayChangeDataPopup = document.getElementById('overlay_changeDataPopup')

    btnChangeMyData.addEventListener('click', openChangeDataPopup)
    btnCloseChangeDataPopup.addEventListener('click', closeChangeDataPopup)

    function openChangeDataPopup() {
        overlayChangeDataPopup.style.display = 'block'
    }

    function closeChangeDataPopup() {
        overlayChangeDataPopup.style.display = 'none'
    }

    //Delete account
    var overlay_deleteAccountPopup = document.getElementById('overlay_deleteAccountPopup')
    var btnCloseDeleteAccountPopup = document.getElementById('btnCloseDeleteAccountPopup')
    var btnDeleteAccount = document.getElementById('btnDeleteAccount')

    btnDeleteAccount.addEventListener('click', openDeleteAccountPopup)
    btnCloseDeleteAccountPopup.addEventListener('click', closeDeleteAccountPopup)

    function openDeleteAccountPopup() {
        overlay_deleteAccountPopup.style.display = 'block'
    }

    function closeDeleteAccountPopup() {
        overlay_deleteAccountPopup.style.display = 'none'
    }

    //ErrorMessage
    var btnCloseErrorMessagePopup = document.getElementById('btnClose')
    var overlayErrorMessagePopup = document.getElementById('overlay')

    btnCloseErrorMessagePopup.addEventListener('click', closeErrorMessagePopup )

    function closeErrorMessagePopup() {
        overlayErrorMessagePopup.style.display = 'none'
    }
</script>

<footer>
    <p>&copy; 2021-2022 HiddenPlaces</p>
    <p>All rights reserved</p>
</footer>
</html>